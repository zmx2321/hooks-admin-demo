import{c as A,_ as D}from"./@babel.cf8b4fc6.js";import{a as I,b as k}from"./dom-align.6c1aa4f8.js";import{l as G,i as J,m as K,n as Q,e as U,p as Z}from"./rc-util.501ec4cf.js";import{R as t}from"./react.658dc38c.js";import{i as _}from"./resize-observer-polyfill.7817cbc6.js";var x=function(n,e){var i=t.useRef(!1),o=t.useRef(null);function f(){window.clearTimeout(o.current)}function u(s){if(f(),!i.current||s===!0){if(n(s)===!1)return;i.current=!0,o.current=window.setTimeout(function(){i.current=!1},e)}else o.current=window.setTimeout(function(){i.current=!1,u()},e)}return[u,function(){i.current=!1,f()}]};function ee(n,e){return n===e?!0:!n||!e?!1:"pageX"in e&&"pageY"in e?n.pageX===e.pageX&&n.pageY===e.pageY:"clientX"in e&&"clientY"in e?n.clientX===e.clientX&&n.clientY===e.clientY:!1}function ne(n,e){n!==document.activeElement&&G(e,n)&&typeof n.focus=="function"&&n.focus()}function Y(n,e){var i=null,o=null;function f(s){var w=A(s,1),d=w[0].target;if(!!document.documentElement.contains(d)){var m=d.getBoundingClientRect(),E=m.width,c=m.height,l=Math.floor(E),a=Math.floor(c);(i!==l||o!==a)&&Promise.resolve().then(function(){e({width:l,height:a})}),i=l,o=a}}var u=new _(f);return n&&u.observe(n),function(){u.disconnect()}}function W(n){return typeof n!="function"?null:n()}function F(n){return D(n)!=="object"||!n?null:n}var te=function(e,i){var o=e.children,f=e.disabled,u=e.target,s=e.align,w=e.onAlign,d=e.monitorWindowResize,m=e.monitorBufferTime,E=m===void 0?0:m,c=t.useRef({}),l=t.useRef(),a=t.Children.only(o),v=t.useRef({});v.current.disabled=f,v.current.target=u,v.current.align=s,v.current.onAlign=w;var C=x(function(){var r=v.current,V=r.disabled,T=r.target,B=r.align,X=r.onAlign,R=l.current;if(!V&&T&&R){var h,p=W(T),y=F(T);c.current.element=p,c.current.point=y,c.current.align=B;var j=document,q=j.activeElement;return p&&Z(p)?h=I(R,p,B):y&&(h=k(R,y,B)),ne(q,R),X&&h&&X(R,h),!0}return!1},E),P=A(C,2),g=P[0],S=P[1],H=t.useState(),$=A(H,2),b=$[0],L=$[1],M=t.useState(),z=A(M,2),N=z[0],O=z[1];return J(function(){L(W(u)),O(F(u))}),t.useEffect(function(){(c.current.element!==b||!ee(c.current.point,N)||!K(c.current.align,s))&&g()}),t.useEffect(function(){var r=Y(l.current,g);return r},[l.current]),t.useEffect(function(){var r=Y(b,g);return r},[b]),t.useEffect(function(){f?S():g()},[f]),t.useEffect(function(){if(d){var r=Q(window,"resize",g);return r.remove}},[d]),t.useEffect(function(){return function(){S()}},[]),t.useImperativeHandle(i,function(){return{forceAlign:function(){return g(!0)}}}),t.isValidElement(a)&&(a=t.cloneElement(a,{ref:U(a.ref,l)})),a},re=t.forwardRef(te);re.displayName="Align";export{re as R};
