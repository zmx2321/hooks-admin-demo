import{f as N,g as $,h as L,i as j,a as I,_ as A,e as F}from"./@babel.cf8b4fc6.js";import{r as t}from"./react.658dc38c.js";import{s as K,a as T,B as m,t as V}from"./rc-util.501ec4cf.js";import{i as X}from"./resize-observer-polyfill.7817cbc6.js";var C=t.exports.createContext(null);function Y(e){var o=e.children,r=e.onBatchResize,i=t.exports.useRef(0),n=t.exports.useRef([]),s=t.exports.useContext(C),l=t.exports.useCallback(function(d,f,u){i.current+=1;var h=i.current;n.current.push({size:d,element:f,data:u}),Promise.resolve().then(function(){h===i.current&&(r==null||r(n.current),n.current=[])}),s==null||s(d,f,u)},[r,s]);return t.exports.createElement(C.Provider,{value:l},o)}var c=new Map;function q(e){e.forEach(function(o){var r,i=o.target;(r=c.get(i))===null||r===void 0||r.forEach(function(n){return n(i)})})}var M=new X(q);function G(e,o){c.has(e)||(c.set(e,new Set),M.observe(e)),c.get(e).add(o)}function J(e,o){c.has(e)&&(c.get(e).delete(o),c.get(e).size||(M.unobserve(e),c.delete(e)))}var Q=function(e){N(r,e);var o=$(r);function r(){return L(this,r),o.apply(this,arguments)}return j(r,[{key:"render",value:function(){return this.props.children}}]),r}(t.exports.Component);function U(e,o){var r=e.children,i=e.disabled,n=t.exports.useRef(null),s=t.exports.useRef(null),l=t.exports.useContext(C),d=typeof r=="function",f=d?r(n):r,u=t.exports.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),h=!d&&t.exports.isValidElement(f)&&K(f),O=h?f.ref:null,B=T(O,n),b=function(){var v;return m(n.current)||(n.current&&A(n.current)==="object"?m((v=n.current)===null||v===void 0?void 0:v.nativeElement):null)||m(s.current)};t.exports.useImperativeHandle(o,function(){return b()});var z=t.exports.useRef(e);z.current=e;var _=t.exports.useCallback(function(a){var v=z.current,E=v.onResize,D=v.data,w=a.getBoundingClientRect(),g=w.width,x=w.height,p=a.offsetWidth,R=a.offsetHeight,y=Math.floor(g),W=Math.floor(x);if(u.current.width!==y||u.current.height!==W||u.current.offsetWidth!==p||u.current.offsetHeight!==R){var k={width:y,height:W,offsetWidth:p,offsetHeight:R};u.current=k;var P=p===Math.round(g)?g:p,S=R===Math.round(x)?x:R,H=I(I({},k),{},{offsetWidth:P,offsetHeight:S});l==null||l(H,a,D),E&&Promise.resolve().then(function(){E(H,a)})}},[]);return t.exports.useEffect(function(){var a=b();return a&&!i&&G(a,_),function(){return J(a,_)}},[n.current,i]),t.exports.createElement(Q,{ref:s},h?t.exports.cloneElement(f,{ref:B}):f)}var Z=t.exports.forwardRef(U),ee="rc-observer-key";function re(e,o){var r=e.children,i=typeof r=="function"?[r]:V(r);return i.map(function(n,s){var l=(n==null?void 0:n.key)||"".concat(ee,"-").concat(s);return t.exports.createElement(Z,F({},e,{key:l,ref:s===0?o:void 0}),n)})}var te=t.exports.forwardRef(re);te.Collection=Y;export{te as R};
