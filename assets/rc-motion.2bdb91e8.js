import{f as Pe,g as Me,h as be,i as Oe,_ as le,c as N,a as f,d as g,k as he,b as ge,e as qe}from"./@babel.cf8b4fc6.js";import{c as Ge}from"./classnames.8d8ee7c7.js";import{c as pe,d as Te,j as te,A as Je,s as Xe,B as Ye}from"./rc-util.501ec4cf.js";import{r as u}from"./react.658dc38c.js";var Ze=u.exports.createContext({}),et=function(t){Pe(n,t);var e=Me(n);function n(){return be(this,n),e.apply(this,arguments)}return Oe(n,[{key:"render",value:function(){return this.props.children}}]),n}(u.exports.Component),K="none",X="appear",Y="enter",Z="leave",Ce="none",_="prepare",W="start",z="active",me="end",De="prepared";function ke(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit".concat(t)]="webkit".concat(e),n["Moz".concat(t)]="moz".concat(e),n["ms".concat(t)]="MS".concat(e),n["O".concat(t)]="o".concat(e.toLowerCase()),n}function tt(t,e){var n={animationend:ke("Animation","AnimationEnd"),transitionend:ke("Transition","TransitionEnd")};return t&&("AnimationEvent"in e||delete n.animationend.animation,"TransitionEvent"in e||delete n.transitionend.transition),n}var nt=tt(pe(),typeof window!="undefined"?window:{}),Ne={};if(pe()){var rt=document.createElement("div");Ne=rt.style}var ee={};function Ue(t){if(ee[t])return ee[t];var e=nt[t];if(e)for(var n=Object.keys(e),r=n.length,o=0;o<r;o+=1){var s=n[o];if(Object.prototype.hasOwnProperty.call(e,s)&&s in Ne)return ee[t]=e[s],ee[t]}return""}var Ve=Ue("animationend"),we=Ue("transitionend"),Fe=!!(Ve&&we),Re=Ve||"animationend",Le=we||"transitionend";function _e(t,e){if(!t)return null;if(le(t)==="object"){var n=e.replace(/-\w/g,function(r){return r[1].toUpperCase()});return t[n]}return"".concat(t,"-").concat(e)}var at=function(t){var e=u.exports.useRef(),n=u.exports.useRef(t);n.current=t;var r=u.exports.useCallback(function(a){n.current(a)},[]);function o(a){a&&(a.removeEventListener(Le,r),a.removeEventListener(Re,r))}function s(a){e.current&&e.current!==a&&o(e.current),a&&a!==e.current&&(a.addEventListener(Le,r),a.addEventListener(Re,r),e.current=a)}return u.exports.useEffect(function(){return function(){o(e.current)}},[]),[s,o]},Ie=pe()?u.exports.useLayoutEffect:u.exports.useEffect,ot=function(){var t=u.exports.useRef(null);function e(){Te.cancel(t.current)}function n(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;e();var s=Te(function(){o<=1?r({isCanceled:function(){return s!==t.current}}):n(r,o-1)});t.current=s}return u.exports.useEffect(function(){return function(){e()}},[]),[n,e]},it=[_,W,z,me],st=[_,De],je=!1,ut=!0;function Ke(t){return t===z||t===me}var ct=function(t,e,n){var r=te(Ce),o=N(r,2),s=o[0],a=o[1],p=ot(),E=N(p,2),i=E[0],c=E[1];function v(){a(_,!0)}var d=e?st:it;return Ie(function(){if(s!==Ce&&s!==me){var l=d.indexOf(s),S=d[l+1],k=n(s);k===je?a(S,!0):S&&i(function(P){function T(){P.isCanceled()||a(S,!0)}k===!0?T():Promise.resolve(k).then(T)})}},[t,s]),u.exports.useEffect(function(){return function(){c()}},[]),[v,s]};function vt(t,e,n,r){var o=r.motionEnter,s=o===void 0?!0:o,a=r.motionAppear,p=a===void 0?!0:a,E=r.motionLeave,i=E===void 0?!0:E,c=r.motionDeadline,v=r.motionLeaveImmediately,d=r.onAppearPrepare,l=r.onEnterPrepare,S=r.onLeavePrepare,k=r.onAppearStart,P=r.onEnterStart,T=r.onLeaveStart,U=r.onAppearActive,V=r.onEnterActive,D=r.onLeaveActive,w=r.onAppearEnd,R=r.onEnterEnd,C=r.onLeaveEnd,O=r.onVisibleChanged,ne=te(),Q=N(ne,2),L=Q[0],F=Q[1],A=te(K),I=N(A,2),m=I[0],M=I[1],q=te(null),G=N(q,2),re=G[0],$=G[1],ae=u.exports.useRef(!1),oe=u.exports.useRef(null);function J(){return n()}var Ee=u.exports.useRef(!1);function Se(){M(K,!0),$(null,!0)}function ye(h){var y=J();if(!(h&&!h.deadline&&h.target!==y)){var x=Ee.current,b;m===X&&x?b=w==null?void 0:w(y,h):m===Y&&x?b=R==null?void 0:R(y,h):m===Z&&x&&(b=C==null?void 0:C(y,h)),m!==K&&x&&b!==!1&&Se()}}var Qe=at(ye),$e=N(Qe,1),We=$e[0],xe=function(y){var x,b,B;switch(y){case X:return x={},g(x,_,d),g(x,W,k),g(x,z,U),x;case Y:return b={},g(b,_,l),g(b,W,P),g(b,z,V),b;case Z:return B={},g(B,_,S),g(B,W,T),g(B,z,D),B;default:return{}}},H=u.exports.useMemo(function(){return xe(m)},[m]),ze=ct(m,!t,function(h){if(h===_){var y=H[_];return y?y(J()):je}if(j in H){var x;$(((x=H[j])===null||x===void 0?void 0:x.call(H,J(),null))||null)}return j===z&&(We(J()),c>0&&(clearTimeout(oe.current),oe.current=setTimeout(function(){ye({deadline:!0})},c))),j===De&&Se(),ut}),Ae=N(ze,2),He=Ae[0],j=Ae[1],Be=Ke(j);Ee.current=Be,Ie(function(){F(e);var h=ae.current;ae.current=!0;var y;!h&&e&&p&&(y=X),h&&e&&s&&(y=Y),(h&&!e&&i||!h&&v&&!e&&i)&&(y=Z);var x=xe(y);y&&(t||x[_])?(M(y),He()):M(K)},[e]),u.exports.useEffect(function(){(m===X&&!p||m===Y&&!s||m===Z&&!i)&&M(K)},[p,s,i]),u.exports.useEffect(function(){return function(){ae.current=!1,clearTimeout(oe.current)}},[]);var ie=u.exports.useRef(!1);u.exports.useEffect(function(){L&&(ie.current=!0),L!==void 0&&m===K&&((ie.current||L)&&(O==null||O(L)),ie.current=!0)},[L,m]);var se=re;return H[_]&&j===W&&(se=f({transition:"none"},se)),[m,j,se,L!=null?L:e]}function ft(t){var e=t;le(t)==="object"&&(e=t.transitionSupport);function n(o,s){return!!(o.motionName&&e&&s!==!1)}var r=u.exports.forwardRef(function(o,s){var a=o.visible,p=a===void 0?!0:a,E=o.removeOnLeave,i=E===void 0?!0:E,c=o.forceRender,v=o.children,d=o.motionName,l=o.leavedClassName,S=o.eventProps,k=u.exports.useContext(Ze),P=k.motion,T=n(o,P),U=u.exports.useRef(),V=u.exports.useRef();function D(){try{return U.current instanceof HTMLElement?U.current:Ye(V.current)}catch{return null}}var w=vt(T,p,D,o),R=N(w,4),C=R[0],O=R[1],ne=R[2],Q=R[3],L=u.exports.useRef(Q);Q&&(L.current=!0);var F=u.exports.useCallback(function($){U.current=$,Je(s,$)},[s]),A,I=f(f({},S),{},{visible:p});if(!v)A=null;else if(C===K)Q?A=v(f({},I),F):!i&&L.current&&l?A=v(f(f({},I),{},{className:l}),F):c||!i&&!l?A=v(f(f({},I),{},{style:{display:"none"}}),F):A=null;else{var m,M;O===_?M="prepare":Ke(O)?M="active":O===W&&(M="start");var q=_e(d,"".concat(C,"-").concat(M));A=v(f(f({},I),{},{className:Ge(_e(d,C),(m={},g(m,q,q&&M),g(m,d,typeof d=="string"),m)),style:ne}),F)}if(u.exports.isValidElement(A)&&Xe(A)){var G=A,re=G.ref;re||(A=u.exports.cloneElement(A,{ref:F}))}return u.exports.createElement(et,{ref:V},A)});return r.displayName="CSSMotion",r}var dt=ft(Fe),ce="add",ve="keep",fe="remove",ue="removed";function lt(t){var e;return t&&le(t)==="object"&&"key"in t?e=t:e={key:t},f(f({},e),{},{key:String(e.key)})}function de(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return t.map(lt)}function pt(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=[],r=0,o=e.length,s=de(t),a=de(e);s.forEach(function(i){for(var c=!1,v=r;v<o;v+=1){var d=a[v];if(d.key===i.key){r<v&&(n=n.concat(a.slice(r,v).map(function(l){return f(f({},l),{},{status:ce})})),r=v),n.push(f(f({},d),{},{status:ve})),r+=1,c=!0;break}}c||n.push(f(f({},i),{},{status:fe}))}),r<o&&(n=n.concat(a.slice(r).map(function(i){return f(f({},i),{},{status:ce})})));var p={};n.forEach(function(i){var c=i.key;p[c]=(p[c]||0)+1});var E=Object.keys(p).filter(function(i){return p[i]>1});return E.forEach(function(i){n=n.filter(function(c){var v=c.key,d=c.status;return v!==i||d!==fe}),n.forEach(function(c){c.key===i&&(c.status=ve)})}),n}var mt=["component","children","onVisibleChanged","onAllRemoved"],Et=["status"],St=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function yt(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:dt,n=function(r){Pe(s,r);var o=Me(s);function s(){var a;be(this,s);for(var p=arguments.length,E=new Array(p),i=0;i<p;i++)E[i]=arguments[i];return a=o.call.apply(o,[this].concat(E)),g(he(a),"state",{keyEntities:[]}),g(he(a),"removeKey",function(c){var v=a.state.keyEntities,d=v.map(function(l){return l.key!==c?l:f(f({},l),{},{status:ue})});return a.setState({keyEntities:d}),d.filter(function(l){var S=l.status;return S!==ue}).length}),a}return Oe(s,[{key:"render",value:function(){var p=this,E=this.state.keyEntities,i=this.props,c=i.component,v=i.children,d=i.onVisibleChanged,l=i.onAllRemoved,S=ge(i,mt),k=c||u.exports.Fragment,P={};return St.forEach(function(T){P[T]=S[T],delete S[T]}),delete S.keys,u.exports.createElement(k,S,E.map(function(T,U){var V=T.status,D=ge(T,Et),w=V===ce||V===ve;return u.exports.createElement(e,qe({},P,{key:D.key,visible:w,eventProps:D,onVisibleChanged:function(C){if(d==null||d(C,{key:D.key}),!C){var O=p.removeKey(D.key);O===0&&l&&l()}}}),function(R,C){return v(f(f({},R),{},{index:U}),C)})}))}}],[{key:"getDerivedStateFromProps",value:function(p,E){var i=p.keys,c=E.keyEntities,v=de(i),d=pt(c,v);return{keyEntities:d.filter(function(l){var S=c.find(function(k){var P=k.key;return l.key===P});return!(S&&S.status===ue&&l.status===fe)})}}}]),s}(u.exports.Component);return g(n,"defaultProps",{component:"div"}),n}var Tt=yt(Fe);export{dt as C,Tt as a};
